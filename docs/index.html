<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="pico.min.css" />
    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go();
      const WASM_URL = "main.wasm";
      var wasm;
      if ("instantiateStreaming" in WebAssembly) {
        WebAssembly.instantiateStreaming(fetch(WASM_URL), go.importObject).then(
          function (obj) {
            wasm = obj.instance;
            go.run(wasm);
          },
        );
      } else {
        fetch(WASM_URL)
          .then((resp) => resp.arrayBuffer())
          .then((bytes) =>
            WebAssembly.instantiate(bytes, go.importObject).then(
              function (obj) {
                wasm = obj.instance;
                go.run(wasm);
              },
            ),
          );
      }
    </script>
    <script defer src="alpine.min.js"></script>
    <title>Go-Diceware &middot; Random Passpharse Generator</title>
  </head>
  <body>
    <header class="container">
      <hgroup>
        <h1>Go-Diceware</h1>
        <p>Random Passpharse Generator</p>
      </hgroup>
    </header>
    <main class="container">
      <p>
        Go-Diceware is an <a href="https://go.dev/">Go</a> and
        <a href="https://webassembly.org/">WASM</a> app generates a random
        passphrase of a user-specified length using the
        <a href="https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt"
          >EFF's Long Wordlist</a
        >. The source code is available at
        <a href="https://github.com/cowork-ai/go-diceware"
          >cowork-ai/go-diceware</a
        >.
      </p>
      <div x-data="{ words: [] }">
        <section>
          <article>
            <label
              >Number of Words
              <input
                id="numWords"
                type="number"
                inputmode="numeric"
                value="4"
              />
            </label>
            <input
              type="submit"
              value="Generate"
              x-on:click="words = sampleWords(numWords.value)"
            />
          </article>
          <section>
            <h3>Passphrase</h3>
            <div x-data="{ style: 'lowercase', delimiter: '-' }">
              <article>
                <div
                  style="text-align: center"
                  x-text="words.map(word => {
                  if (word.length === 0) {
                  return '';
                  } else if (style === 'lowercase') {
                  return word.toLowerCase();
                  } else if (style === 'uppercase') {
                  return word.toUpperCase();
                  } else if (style=== 'capitalize'){
                    return word.charAt(0).toUpperCase() + word.slice(1);
                  }
                  return word;
                  }).join(delimiter)"
                ></div>
                <template x-if="words.length === 0">
                  <small>Click the Generate button.</small>
                </template>
              </article>
              <div class="grid">
                <fieldset>
                  <legend>Style:</legend>
                  <input
                    id="lowercase"
                    type="radio"
                    name="style"
                    value="lowercase"
                    x-model="style"
                    checked
                  />
                  <label for="lowercase" style="text-transform: lowercase"
                    >Lowercase</label
                  >
                  <input
                    id="uppercase"
                    type="radio"
                    name="style"
                    value="uppercase"
                    x-model="style"
                  />
                  <label for="uppercase" style="text-transform: uppercase"
                    >Uppercase</label
                  >
                  <input
                    id="capitalize"
                    type="radio"
                    name="style"
                    value="capitalize"
                    x-model="style"
                  />
                  <label for="capitalize" style="text-transform: capitalize"
                    >Capitalize</label
                  >
                </fieldset>
                <fieldset>
                  <legend>Delimiter:</legend>
                  <input
                    id="none"
                    type="radio"
                    name="delimiter"
                    value=""
                    x-model="delimiter"
                  />
                  <label for="none">None</label>
                  <input
                    id="hyphen"
                    type="radio"
                    name="delimiter"
                    value="-"
                    x-model="delimiter"
                    checked
                  />
                  <label for="hyphen"><kbd>-</kbd></label>
                  <input
                    id="underscore"
                    type="radio"
                    name="delimiter"
                    value="_"
                    x-model="delimiter"
                  />
                  <label for="underscore"><kbd>_</kbd></label>
                  <input
                    id="comma"
                    type="radio"
                    name="delimiter"
                    value=","
                    x-model="delimiter"
                    checked
                  />
                  <label for="comma"><kbd>,</kbd></label>
                  <input
                    id="slash"
                    type="radio"
                    name="delimiter"
                    value="/"
                    x-model="delimiter"
                  />
                  <label for="slash"><kbd>/</kbd></label>
                  <input
                    id="colon"
                    type="radio"
                    name="delimiter"
                    value=":"
                    x-model="delimiter"
                  />
                  <label for="colon"><kbd>:</kbd></label>
                </fieldset>
              </div>
            </div>
          </section>
        </section>
      </div>
    </main>
    <footer class="container">
      <aside>
        <nav>
          <ul>
            <li>
              <a href="https://github.com/cowork-ai/go-diceware">GitHub</a>
            </li>
            <li><a href="https://cwrk.ai/">Cowork AI, Inc.</a></li>
          </ul>
        </nav>
      </aside>
    </footer>
  </body>
</html>
